
--EXEC RSP_GS_GET_TRANS_CODE_INFO 'RCD','000000';
EXEC RSP_GS_GET_COMPANY_INFO 'RND'
EXEC RSP_GL_GET_SYSTEM_PARAM 'RND','en'
EXEC RSP_CB_GET_SYSTEM_PARAM 'RND','en'

IF (OBJECT_ID('tempdb..#__SP_ERR_Table') is null) BEGIN
	select SP_Name=cast('' as varchar(50)), Err_Code=cast('' as varchar(20)), Err_Detail=cast('' as nvarchar(max)) into #__SP_ERR_Table where 0=1
end else begin
	truncate table #__SP_ERR_TABLE
end

begin try
	-- Jalankan script SP disini
	DROP TABLE IF EXISTS #GLT0100_JOURNAL_DETAIL;
	CREATE TABLE #GLT0100_JOURNAL_DETAIL (
    CGLACCOUNT_NO VARCHAR(20),
    CCENTER_CODE VARCHAR(10),
    CDBCR CHAR(1),
    NAMOUNT NUMERIC(19,2),
    CDETAIL_DESC NVARCHAR(200),
    CDOCUMENT_NO VARCHAR(20),
    CDOCUMENT_DATE VARCHAR(8)
	);
	INSERT INTO #GLT0100_JOURNAL_DETAIL VALUES
	('14.00.0000','12345678','D','100','bug devtest desc3','bug devtest3','20240320'),
	('15.00.0000','12345678','C','100','bug devtest desc3','bug devtest3','20240320');

	EXEC RSP_GL_SAVE_JOURNAL 
	'ghc', --CUSER_ID
	'5E413004-59C7-4AE9-B961-7849A49A02E3',--CJRN_ID
	'EDIT',--CACTION
	'RCD',--CCOMPANY_ID
	'FIN',--CDEPT_CODE
	'000000',--CTRANS_CODE
	'GJV/FIN240012',--CREF_NO
	'bug devtest3',--CDOC_NO
	'20240320',--CDOC_DATE
	'20240316',--CREF_DATE
	'',--CREVERSE_DATE
	0,--LREVERSE_DATE
	'bug devtest desc3', --CTRANS_DESC
	'IDR',--CCURRENCY_CODE
	1.000000,--NLBASE_RATE
	1.000000,--NLCURRENCY_RATE
	1.000000,--NBBASERATE
	1.000000,--NBCURRENCY_RATE
	100.000000;--NPRELIST_AMOUNT
end try
begin catch
	select * from #__SP_ERR_TABLE --untuk tahu error code yg di raise
end catch
EXEC RSP_GL_GET_JOURNAL 'RCD','ghc','D4EA6422-2170-463E-AFF3-2D47B5B10BF0','en'
EXEC RSP_CB_GET_TRANS_JRN_LIST 'D4EA6422-2170-463E-AFF3-2D47B5B10BF0','en'

select * from #GLT0100_JOURNAL_DETAIL
